<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>M3 MOBILE / Builder</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="app-shell" id="appShell"><header><div class="header-top"><div class="header-brand"><div class="brand-logo">M3 MOBILE <span>/ BUILDER</span></div>
<div class="header-title" data-i18n="configurator_subtitle">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä –ø–æ–¥–±–æ—Ä–∞</div>
</div>
<div class="header-actions"><div class="header-links"><button data-i18n="btn_site" class="btn-ghost" onclick="window.open('https://m3mobile.net','_blank')"><svg class="ico" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 010 20M12 2a15.3 15.3 0 000 20"/></svg>–°–∞–π—Ç</button>
<button class="btn-ghost" data-i18n="btn_warranty" onclick="window.open('https://www.m3-service.net/searchProduct','_blank')"><svg class="ico" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>–ì–∞—Ä–∞–Ω—Ç–∏—è</button>
<button data-i18n="btn_service" class="btn-ghost" onclick="showModal('service-centers-modal')"><svg class="ico" viewBox="0 0 24 24"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg>–°–µ—Ä–≤–∏—Å</button>
<button data-i18n="btn_tech_docs" class="btn-ghost" onclick="window.open('https://m3mobile-manual.refined.site/','_blank')"><svg class="ico" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>Tech Docs</button>
</div>
<div class="lang-row"><button class="btn-ghost lang" onclick="changeLanguage('ru')">RU</button>
<button class="btn-ghost lang" onclick="changeLanguage('en')">EN</button>
<button class="btn-ghost lang" onclick="changeLanguage('ko')">KO</button>
</div>
</div>
</div>
<div class="distributor-row"><button class="btn-dist" onclick="openOcsModal()">–°—Ç–æ–∫ OCS</button>
<button class="btn-dist" onclick="openTreolanModal()">–°—Ç–æ–∫ Treolan</button>
<button class="btn-dist" onclick="openM3StockModal()">–°—Ç–æ–∫ M3</button>
<button class="btn-dist btn-dist-combined" onclick="openCombinedModal()">üîÄ –°–≤–æ–¥–Ω—ã–π</button>
</div>
<nav class="cat-nav"><button class="cat-btn active" onclick="filterByCategory('all',this)" data-i18n="all_devices">–í—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</button>
<button class="cat-btn" onclick="filterByCategory('ultra-rugged',this)">Ultra Rugged</button>
<button class="cat-btn" onclick="filterByCategory('rugged',this)">Rugged</button>
<button class="cat-btn" onclick="filterByCategory('light-mobile',this)">Light Mobile</button>
<button class="cat-btn" onclick="filterByCategory('wearable',this)">Wearable</button>
<button class="cat-btn" onclick="filterByCategory('kiosk',this)">Kiosk</button>
</nav>
<div class="sku-guide-tab"><button data-i18n="btn_how_to_read" onclick="showModal('sku-guide-modal')"><svg class="ico" viewBox="0 0 24 24"><path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/><path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/></svg>–ö–∞–∫ —á–∏—Ç–∞—Ç—å SKU</button>
</div>
</header>
<div class="search-bar"><a href="https://m3solutionbuilder.tilda.ws/page88650666.html" target="_blank" class="help-cta" data-i18n="btn_dont_know">–Ø –Ω–µ –∑–Ω–∞—é, —á—Ç–æ –≤—ã–±—Ä–∞—Ç—å</a><div class="search-row"><input type="text" id="sku-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ SKU —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–ª–∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä–∞‚Ä¶" data-i18n-placeholder="search_placeholder" autocomplete="off"><button data-i18n="btn_search" class="btn-search" onclick="searchBySKU()"><svg class="ico" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>–ù–∞–π—Ç–∏</button>
</div>
<div class="search-status" id="search-status">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
</div>
<div class="main-layout"><aside class="filters-sidebar"><div class="sidebar-title" data-i18n="filters">–§–∏–ª—å—Ç—Ä—ã</div>
<div class="filter-group"><label class="filter-label" data-i18n="filter_model">–ú–æ–¥–µ–ª—å</label>
<select id="model-select" class="filter-select" onchange="updateAndroidOptions();filterSKU();"><option value="" data-i18n="all_models">–í—Å–µ –º–æ–¥–µ–ª–∏</option>
</select>
</div>
<div class="filter-group"><label class="filter-label" data-i18n="filter_android">Android</label>
<select id="android-select" class="filter-select" onchange="updateScannerOptions();filterSKU();"><option value="" data-i18n="all_android">–õ—é–±–∞—è –≤–µ—Ä—Å–∏—è</option>
</select>
</div>
<div class="filter-group" style="position:relative"><label class="filter-label" data-i18n="filter_scanner">–°–∫–∞–Ω–µ—Ä</label>
<div id="scanner-dropdown" class="custom-scanner-dropdown">
  <div id="scanner-display" class="filter-select custom-scanner-trigger" onclick="toggleScannerDropdown()" style="cursor:pointer;user-select:none;display:flex;align-items:center;justify-content:space-between">
    <span id="scanner-display-text" data-i18n="all_scanners">–õ—é–±–æ–π —Å–∫–∞–Ω–µ—Ä</span>
    <span style="font-size:10px;opacity:.6;margin-left:6px">‚ñº</span>
  </div>
  <div id="scanner-options" class="scanner-options-list" style="display:none"></div>
</div>
<input type="hidden" id="scanner-select" value="">
</div>
<div class="filter-group"><label class="filter-label" data-i18n="filter_memory">–ü–∞–º—è—Ç—å</label>
<select id="memory-select" class="filter-select" onchange="updateButtonsOptions();filterSKU();"><option value="" data-i18n="all_memory">–õ—é–±–∞—è –ø–∞–º—è—Ç—å</option>
</select>
</div>
<div class="filter-group"><label class="filter-label" data-i18n="filter_buttons">–ö–Ω–æ–ø–∫–∏</label>
<select id="buttons-select" class="filter-select" onchange="updateHandleOptions();filterSKU();"><option value="" data-i18n="all_buttons">–õ—é–±–æ–µ –∫–æ–ª-–≤–æ</option>
</select>
</div>
<div class="filter-group"><label class="filter-label" data-i18n="filter_handle">–†—É–∫–æ—è—Ç–∫–∞</label>
<select id="handle-select" class="filter-select" onchange="updateLteOptions();filterSKU();"><option value="" data-i18n="all_handle">–õ—é–±–æ–π —Ç–∏–ø</option>
</select>
</div>
<div class="filter-group"><label class="filter-label" data-i18n="filter_lte">LTE</label>
<select id="lte-select" class="filter-select" onchange="updateFrostOptions();filterSKU();"><option value="" data-i18n="lte_any">–ù–µ –≤–∞–∂–Ω–æ</option>
<option value="YES" data-i18n="lte_yes">–ï—Å—Ç—å LTE</option>
<option value="NO" data-i18n="lte_no">–ù–µ—Ç LTE</option>
</select>
</div>
<div class="filter-group"><label class="filter-label" data-i18n="filter_frozen">–ú–æ—Ä–æ–∑–æ—Å—Ç–æ–π–∫–æ—Å—Ç—å</label>
<select id="frost-select" class="filter-select" onchange="filterSKU();"><option value="" data-i18n="lte_any">–ù–µ –≤–∞–∂–Ω–æ</option>
<option value="YES" data-i18n="frozen_yes">–ú–æ—Ä–æ–∑–æ—Å—Ç–æ–π–∫–∏–π</option>
<option value="NO" data-i18n="frozen_no">–ù–µ –º–æ—Ä–æ–∑–æ—Å—Ç–æ–π–∫–∏–π</option>
</select>
</div>
<button data-i18n="btn_clear_filters" class="btn-reset" onclick="resetFilters()"><svg class="ico" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
</aside>
<div class="results-area"><div class="results-header"><div class="results-heading" data-i18n="results_heading">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–¥–±–æ—Ä–∞</div>
<div class="results-count" id="results-count">0 SKU</div>
</div>
<div id="results-container"><div class="no-results"><p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö‚Ä¶</p></div>
</div>
<div class="accessory-panel" id="accessorySelection"><div class="acc-header"><h3 data-i18n="acc_for_sku">–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã –¥–ª—è SKU:</h3><span id="selectedSKUCode"></span></div>
<div class="acc-warning">${t('acc_price_approx')}</div>
<div class="acc-body"><div id="currentSKUDetails" class="acc-sku-info"></div>
<div id="accessoriesList"></div>
<div class="acc-total"><span>${t('spec_total')}</span><strong id="finalConfigurationPrice">0 $</strong></div>
<button class="btn-add-spec" data-i18n="btn_add_to_spec" onclick="addSKUToSpecification()"><svg class="ico ico-lg" viewBox="0 0 24 24"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/></svg>–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é</button>
</div>
</div>
</div>
</div>
<div class="spec-table-section" id="finalConfiguration"><div class="spec-table-header"><h3 data-i18n="spec_final">–§–∏–Ω–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è</h3><div class="spec-actions"><button data-i18n="btn_add_manual_short" class="btn-sm" onclick="openAddManualSKUModal()"><svg class="ico" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>–î–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é</button>
<button class="btn-sm" onclick="exportToCSV()"><svg class="ico" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>CSV</button>
<button data-i18n="btn_print" class="btn-sm" onclick="printSpec()"><svg class="ico" viewBox="0 0 24 24"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></svg>–ü–µ—á–∞—Ç—å</button>
<button class="btn-sm danger" onclick="clearSpecification()"><svg class="ico" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14a2 2 0 01-2 2H8a2 2 0 01-2-2L5 6"/></svg>–û—á–∏—Å—Ç–∏—Ç—å</button>
</div>
</div>
<table id="finalConfigTable"><thead><tr><th>–¢–∏–ø</th>
<th>SKU</th>
<th data-i18n="spec_name">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
<th data-i18n="spec_qty">–ö–æ–ª-–≤–æ</th>
<th>–¶–µ–Ω–∞, $</th>
<th data-i18n="spec_total_col">–ò—Ç–æ–≥–æ, $</th>
<th></th>
</tr>
</thead><tbody id="specTableBody"></tbody></table>
</div>
<div class="app-footer">M3 MOBILE Russia &nbsp;|&nbsp; +7 917 518 6388 &nbsp;|&nbsp;<a href="mailto:russia@m3mobile.co.kr">russia@m3mobile.co.kr</a></div>
</div>
<div class="floating-group"><button class="btn-float btn-float-addspec" id="btn-float-addspec" onclick="addSKUToSpecification()"><svg class="ico" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é</button>
<button class="btn-float btn-float-compare" id="btn-float-compare" onclick="showComparison()"><svg class="ico" viewBox="0 0 24 24"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg><span data-i18n="btn_compare_short">–°—Ä–∞–≤–Ω–∏—Ç—å</span><span class="float-badge" id="comparison-count">0</span></button>
<button class="btn-float btn-float-spec" id="btn-float-spec" onclick="scrollToSpec()"><svg class="ico" viewBox="0 0 24 24"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/></svg><span data-i18n="spec_title">–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è</span><span class="float-badge" id="spec-count">0</span></button>
</div>
<button id="back-to-top" onclick="window.scrollTo({top:0,behavior:'smooth'})">
  <svg style="width:22px;height:22px;stroke:#fff;fill:none;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;" viewBox="0 0 24 24">
    <polyline points="18 15 12 9 6 15"/>
  </svg>
  <span style="font-size:14px;font-weight:900;color:#fff;line-height:1;letter-spacing:1px">UP</span>
</button>
<div class="modal-backdrop" id="service-centers-modal" onclick="closeModalOnBackdrop(event,this)"><div class="modal-box"><div class="modal-head"><h2 data-i18n="service_centers">–ù–∞—à–∏ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ —Ü–µ–Ω—Ç—Ä—ã</h2><button class="modal-close" onclick="closeModal('service-centers-modal')">√ó</button>
</div>
<div class="modal-body"><div class="sc-grid"><div class="sc-item"><a href="https://www.rss.ru/" target="_blank"><img src="https://lh3.googleusercontent.com/d/1oXAGYzJb9raq7cM-i5xsk51-2vPB0jR6" alt="RSS"></a></div>
<div class="sc-item"><a href="https://wetm.ru/servisniy-tsentr/" target="_blank"><img src="https://lh3.googleusercontent.com/d/1fqjIYfiHDvBcsADEqSzS_vC-bCED3GI7" alt="WETM"></a></div>
</div>
</div>
</div>
</div>
<div class="modal-backdrop" id="sku-guide-modal" onclick="closeModalOnBackdrop(event,this)"><div class="modal-box"><div class="modal-head"><h2>–ö–∞–∫ —á–∏—Ç–∞—Ç—å SKU</h2><button class="modal-close" onclick="closeModal('sku-guide-modal')">√ó</button>
</div>
<div class="modal-body"><div class="sku-guide-content"><p data-i18n="sku_guide_desc">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —á—Ç–µ–Ω–∏—é SKU –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø–æ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ M3 MOBILE.</p><p data-i18n="btn_download_hint">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª:</p><a href="https://docs.google.com/spreadsheets/d/1IPSD12w8M4azk_ICRiBglxboGIjoe0Hh/export?format=xlsx" class="btn-download" download="M3_MOBILE_SKU_Guide.xlsx"><svg class="ico ico-lg" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg><span data-i18n="btn_download_sku">–°–∫–∞—á–∞—Ç—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ SKU</span></a></div>
</div>
</div>
</div>
<div class="modal-backdrop" id="comparison-modal" onclick="closeModalOnBackdrop(event,this)"><div class="modal-box wide"><div class="modal-head"><h2 data-i18n="comparison_title_modal">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ SKU</h2><button class="modal-close" onclick="closeModal('comparison-modal')">√ó</button>
</div>
<div class="modal-body" id="comparison-body"></div>
</div>
</div>
<div class="modal-backdrop" id="manual-sku-modal" onclick="closeModalOnBackdrop(event,this)"><div class="modal-box"><div class="modal-head"><h2 data-i18n="btn_add_manual">–î–æ–±–∞–≤–∏—Ç—å –∞—Ä—Ç–∏–∫—É–ª –≤—Ä—É—á–Ω—É—é</h2><button class="modal-close" onclick="closeModal('manual-sku-modal')">√ó</button>
</div>
<div class="modal-body"><div class="form-group"><label class="form-label" data-i18n="spec_sku">–ê—Ä—Ç–∏–∫—É–ª (SKU)</label>
<input type="text" id="manual-sku" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞—Ä—Ç–∏–∫—É–ª"></div>
<div class="form-group"><label class="form-label">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</label>
<textarea id="manual-name" class="form-textarea" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ"></textarea></div>
<div class="form-group"><label class="form-label" data-i18n="spec_price">–¶–µ–Ω–∞ ($)</label>
<input type="number" id="manual-price" class="form-input" placeholder="0.00" min="0" step="0.01"></div>
<div class="form-actions"><button class="btn-cancel" onclick="closeModal('manual-sku-modal')" data-i18n="btn_cancel">–û—Ç–º–µ–Ω–∞</button>
<button class="btn-submit" onclick="addManualSKU()" data-i18n="btn_add_short">–î–æ–±–∞–≤–∏—Ç—å</button>
</div>
</div>
</div>
</div>
<div class="toast" id="toast"></div>
<div class="lightbox" id="lightbox" onclick="closeLightbox()"><button class="lightbox-close" onclick="closeLightbox()">&#x2715;</button>
<img id="lightbox-img" src="" alt=""></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     TREOLAN STOCK MODAL ‚Äî –≤—Å—Ç–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ 
<!-- COMBINED STOCK MODAL -->
<div id="combined-modal" class="treolan-modal-backdrop" onclick="closeCombinedOnBackdrop(event)" style="display:none">
  <div class="treolan-modal" style="max-width:960px">
    <div class="treolan-modal-head">
      <span class="treolan-modal-title">üîÄ –°–≤–æ–¥–Ω—ã–π —Å—Ç–æ–∫ ‚Äî –≤—Å–µ –¥–∏—Å—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã</span>
      <button class="treolan-modal-close" onclick="closeCombinedModal()">‚úï</button>
    </div>
    <div class="treolan-toolbar">
      <input type="text" id="combined-search" class="treolan-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é..." oninput="filterCombinedTable()">
      <select id="combined-avail-filter" class="treolan-filter" onchange="filterCombinedTable()">
        <option value="">–í—Å–µ –ø–æ–∑–∏—Ü–∏–∏</option>
        <option value="avail" selected>–ï—Å—Ç—å —Ö–æ—Ç—å —É –æ–¥–Ω–æ–≥–æ</option>
        <option value="all3">–ï—Å—Ç—å —É –≤—Å–µ—Ö —Ç—Ä—ë—Ö</option>
      </select>
      <button class="t-refresh-btn" onclick="loadCombinedData()">–û–±–Ω–æ–≤–∏—Ç—å –≤—Å—ë</button>
    </div>
    <div id="combined-stats" style="padding:6px 16px;font-size:12px;opacity:.6"></div>
    <div id="combined-body" style="overflow-y:auto;flex:1;padding:0 8px 8px"></div>
    <div class="treolan-modal-footer" style="display:flex;align-items:center;gap:10px">
      <span id="combined-freshness" style="font-size:11px;opacity:.5;margin-right:auto"></span>
      <span id="combined-footer-info" style="font-size:12px;opacity:.6"></span>
      <button class="t-refresh-btn" onclick="exportCombined()">üì• Excel</button>
    </div>
  </div>
</div>

<!-- MOBILE FILTER FAB + DRAWER -->
<button id="filter-fab" onclick="openFilterDrawer()" aria-label="–§–∏–ª—å—Ç—Ä—ã">
  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
    <line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/>
  </svg>
  <span>–§–∏–ª—å—Ç—Ä—ã</span>
  <span id="fab-active-count" style="display:none;background:#ef4444;color:#fff;border-radius:10px;padding:1px 6px;font-size:11px;font-weight:700;margin-left:4px"></span>
</button>
<div id="drawer-backdrop" onclick="closeFilterDrawer()" style="display:none"></div>
<div id="filter-drawer">
  <div id="drawer-handle"></div>
  <div style="display:flex;align-items:center;justify-content:space-between;padding:0 20px 16px">
    <span style="font-weight:700;font-size:16px;color:#1E2171">–§–∏–ª—å—Ç—Ä—ã</span>
    <button onclick="closeFilterDrawer()" style="background:none;border:none;font-size:22px;cursor:pointer;color:#888;line-height:1">‚úï</button>
  </div>
  <div id="drawer-filters-content" style="padding:0 20px;overflow-y:auto;flex:1"></div>
  <div style="padding:16px 20px;border-top:1px solid #eee;display:flex;gap:10px">
    <button onclick="resetFilters();closeFilterDrawer()" style="flex:1;padding:12px;border:1.5px solid #DDE0EC;border-radius:10px;background:#fff;color:#1E2171;font-weight:600;font-size:14px;cursor:pointer">–°–±—Ä–æ—Å–∏—Ç—å</button>
    <button onclick="closeFilterDrawer()" style="flex:2;padding:12px;border:none;border-radius:10px;background:#1E2171;color:#fff;font-weight:600;font-size:14px;cursor:pointer">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
  </div>
</div>

<!-- STATS WIDGET -->
<button id="stats-fab" onclick="toggleStatsWidget()" title="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">
  üìä
  <span id="stats-fab-label">–°—Ç–∞—Ç.</span>
</button>
<div id="stats-panel">
  <div id="stats-panel-header">
    <span style="font-weight:700;font-size:14px">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
    <div style="display:flex;gap:8px;align-items:center">
      <button onclick="clearStats()" style="background:none;border:none;font-size:11px;color:#999;cursor:pointer;padding:0">–°–±—Ä–æ—Å–∏—Ç—å</button>
      <button onclick="toggleStatsWidget()" style="background:none;border:none;font-size:18px;color:#888;cursor:pointer;line-height:1">‚úï</button>
    </div>
  </div>
  <div id="stats-tabs" style="display:flex;border-bottom:1px solid #eee;margin-bottom:8px">
    <button class="stats-tab active" onclick="showStatsTab('models')">–ú–æ–¥–µ–ª–∏</button>
    <button class="stats-tab" onclick="showStatsTab('skus')">SKU</button>
    <button class="stats-tab" onclick="showStatsTab('filters')">–§–∏–ª—å—Ç—Ä—ã</button>
    <button class="stats-tab" onclick="showStatsTab('configs')">–ö–æ–Ω—Ñ–∏–≥–∏</button>
  </div>
  <div id="stats-content" style="overflow-y:auto;flex:1;padding:0 4px"></div>
  <div style="padding:8px 4px 0;font-size:10px;color:#bbb;border-top:1px solid #f0f0f0;margin-top:4px">
    –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
  </div>
</div>
</body>
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<style>
.treolan-modal-backdrop{display:none;position:fixed;inset:0;background:rgba(13,14,26,.6);z-index:4000;backdrop-filter:blur(4px);align-items:flex-start;justify-content:center;padding:20px;overflow-y:auto}
.treolan-modal-backdrop.open{display:flex}
.treolan-modal{background:#fff;border-radius:16px;box-shadow:0 20px 60px rgba(13,14,26,.2);width:100%;max-width:980px;margin:auto;position:relative;animation:modalIn .2s ease}
.treolan-modal-head{background:linear-gradient(135deg,#151960,#2764E2);color:#fff;padding:18px 24px;border-radius:16px 16px 0 0;display:flex;justify-content:space-between;align-items:center;gap:12px}
.treolan-modal-head h2{font-size:17px;font-weight:700}
.treolan-modal-head .t-meta{font-size:12px;opacity:.75}
.treolan-close{background:rgba(255,255,255,.15);border:none;color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center;transition:.2s;flex-shrink:0}
.treolan-close:hover{background:rgba(255,255,255,.3)}
.treolan-toolbar{padding:14px 20px;background:#F4F5F9;border-bottom:1px solid #DDE0EC;display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.treolan-search{flex:1;min-width:200px;padding:9px 14px;border:1.5px solid #DDE0EC;border-radius:8px;font-size:14px;font-family:inherit;outline:none;transition:.2s}
.treolan-search:focus{border-color:#2764E2;box-shadow:0 0 0 3px rgba(39,100,226,.1)}
.treolan-filter{padding:9px 12px;border:1.5px solid #DDE0EC;border-radius:8px;font-size:13px;font-family:inherit;background:#fff;outline:none;cursor:pointer;min-width:140px}
.treolan-stats{font-size:13px;color:#5A607A;white-space:nowrap}
.treolan-body{padding:16px 20px;max-height:65vh;overflow-y:auto}
.treolan-loading{text-align:center;padding:40px;color:#5A607A;font-size:15px}
.treolan-error{text-align:center;padding:30px;color:#FF644A;font-weight:600}
.treolan-table{width:100%;border-collapse:collapse;font-size:13.5px}
.treolan-table thead th{background:#1E2171;color:#fff;padding:10px 12px;text-align:left;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.06em;position:sticky;top:0;z-index:1}
.treolan-table tbody tr{border-bottom:1px solid #ECEEF5;transition:background .15s}
.treolan-table tbody tr:hover{background:#F4F5F9}
.treolan-table td{padding:9px 12px;vertical-align:middle}
.t-articul{font-family:'DM Mono',monospace;font-size:13px;font-weight:500;color:#0D0E1A}
.t-name{color:#0D0E1A;font-size:13px;line-height:1.4;max-width:340px}
.t-stock{font-weight:700;color:#22C55E}
.t-stock.zero{color:#FF644A}
.t-transit{color:#F59E0B;font-weight:600}
.t-transit.zero{color:#AAB0C6;font-weight:400}
.t-badge-avail{background:#DCFCE7;color:#15803D;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:700}
.t-badge-noavail{background:#FEE2E2;color:#DC2626;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:700}
.treolan-footer{padding:12px 20px;background:#F4F5F9;border-top:1px solid #DDE0EC;border-radius:0 0 16px 16px;display:flex;justify-content:space-between;align-items:center;font-size:13px;color:#5A607A}
.t-refresh-btn{background:#1E2171;color:#fff;border:none;padding:8px 16px;border-radius:8px;cursor:pointer;font-size:13px;font-weight:600;font-family:inherit;transition:.2s}
.t-refresh-btn:hover{background:#2764E2}
</style>

<div class="treolan-modal-backdrop" id="treolan-modal" onclick="closeTreolanOnBackdrop(event)">
  <div class="treolan-modal">
    <div class="treolan-modal-head">
      <div>
        <h2>–°–∫–ª–∞–¥ Treolan ‚Äî M3 Mobile</h2>
        <div class="t-meta" id="treolan-updated">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
      </div>
      <button class="treolan-close" onclick="closeTreolanModal()">‚úï</button>
    </div>
    <div class="treolan-toolbar">
      <input class="treolan-search" id="treolan-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é..." oninput="filterTreolanTable()">
      <select class="treolan-filter" id="treolan-avail-filter" onchange="filterTreolanTable()">
        <option value="">–í—Å–µ –ø–æ–∑–∏—Ü–∏–∏</option>
        <option value="avail">–ï—Å—Ç—å –Ω–∞ —Å–∫–ª–∞–¥–µ</option>
        <option value="transit">–ï—Å—Ç—å —Ç—Ä–∞–Ω–∑–∏—Ç</option>
        <option value="none">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</option>
      </select>
      <span class="treolan-stats" id="treolan-stats"></span>
    </div>
    <div class="treolan-body" id="treolan-body">
      <div class="treolan-loading">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
    </div>
    <div class="treolan-footer">
      <span id="treolan-footer-info">–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</span>
      <span id="treolan-freshness" style="font-size:11px;opacity:.5;margin-right:auto"></span><button class="t-refresh-btn" onclick="exportTreolan()">üì• Excel</button><button class="t-refresh-btn" onclick="loadTreolanData()">–û–±–Ω–æ–≤–∏—Ç—å</button>
    </div>
  </div>
</div>

<!-- OCS STOCK MODAL -->
<div class="treolan-modal-backdrop" id="ocs-modal" onclick="closeOcsOnBackdrop(event)">
  <div class="treolan-modal">
    <div class="treolan-modal-head">
      <div>
        <h2>–°–∫–ª–∞–¥ OCS ‚Äî M3 Mobile</h2>
        <div class="t-meta" id="ocs-updated">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
      </div>
      <button class="treolan-close" onclick="closeOcsModal()">‚úï</button>
    </div>
    <div class="treolan-toolbar">
      <input class="treolan-search" id="ocs-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é..." oninput="filterOcsTable()">
      <select class="treolan-filter" id="ocs-avail-filter" onchange="filterOcsTable()">
        <option value="all">–í—Å–µ –ø–æ–∑–∏—Ü–∏–∏</option>
        <option value="avail">–¢–æ–ª—å–∫–æ –≤ –Ω–∞–ª–∏—á–∏–∏</option>
        <option value="transit">–¢–æ–ª—å–∫–æ —Ç—Ä–∞–Ω–∑–∏—Ç</option>
        <option value="none">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</option>
      </select>
      <span class="treolan-stats" id="ocs-stats"></span>
    </div>
    <div class="treolan-body" id="ocs-body">
      <div class="treolan-loading">‚è≥ –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ...</div>
    </div>
    <div class="treolan-footer">
      <span id="ocs-footer-info"></span>
      <span id="ocs-freshness" style="font-size:11px;opacity:.5;margin-right:auto"></span><button class="t-refresh-btn" onclick="exportOcs()">üì• Excel</button><button class="t-refresh-btn" onclick="loadOcsData()">–û–±–Ω–æ–≤–∏—Ç—å</button>
    </div>
  </div>
</div>

<!-- M3 STOCK MODAL -->
<div class="treolan-modal-backdrop" id="m3stock-modal" onclick="closeM3StockOnBackdrop(event)">
  <div class="treolan-modal">
    <div class="treolan-modal-head">
      <div>
        <h2>–°—Ç–æ–∫ M3 Mobile</h2>
        <div class="t-meta" id="m3stock-updated">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
      </div>
      <button class="treolan-close" onclick="closeM3StockModal()">‚úï</button>
    </div>
    <div class="treolan-toolbar">
      <input class="treolan-search" id="m3stock-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é..." oninput="filterM3StockTable()">
      <select class="treolan-filter" id="m3stock-avail-filter" onchange="filterM3StockTable()">
        <option value="all">–í—Å–µ –ø–æ–∑–∏—Ü–∏–∏</option>
        <option value="avail">–¢–æ–ª—å–∫–æ –≤ –Ω–∞–ª–∏—á–∏–∏</option>
        <option value="none">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</option>
      </select>
      <span class="treolan-stats" id="m3stock-stats"></span>
    </div>
    <div class="treolan-body" id="m3stock-body">
      <div class="treolan-loading">‚è≥ –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ...</div>
    </div>
    <div class="treolan-footer">
      <span id="m3stock-footer-info">–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</span>
      <span id="m3-freshness" style="font-size:11px;opacity:.5;margin-right:auto"></span><button class="t-refresh-btn" onclick="exportM3Stock()">üì• Excel</button><button class="t-refresh-btn" onclick="m3StockLoaded=false;loadM3StockData()">–û–±–Ω–æ–≤–∏—Ç—å</button>
    </div>
  </div>
</div>
<script src="app.js"></script>

<!-- COMBINED STOCK MODAL -->
<div id="combined-modal" class="treolan-modal-backdrop" onclick="closeCombinedOnBackdrop(event)" style="display:none">
  <div class="treolan-modal" style="max-width:960px">
    <div class="treolan-modal-head">
      <span class="treolan-modal-title">üîÄ –°–≤–æ–¥–Ω—ã–π —Å—Ç–æ–∫ ‚Äî –≤—Å–µ –¥–∏—Å—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã</span>
      <button class="treolan-modal-close" onclick="closeCombinedModal()">‚úï</button>
    </div>
    <div class="treolan-toolbar">
      <input type="text" id="combined-search" class="treolan-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é..." oninput="filterCombinedTable()">
      <select id="combined-avail-filter" class="treolan-filter" onchange="filterCombinedTable()">
        <option value="">–í—Å–µ –ø–æ–∑–∏—Ü–∏–∏</option>
        <option value="avail" selected>–ï—Å—Ç—å —Ö–æ—Ç—å —É –æ–¥–Ω–æ–≥–æ</option>
        <option value="all3">–ï—Å—Ç—å —É –≤—Å–µ—Ö —Ç—Ä—ë—Ö</option>
      </select>
      <button class="t-refresh-btn" onclick="loadCombinedData()">–û–±–Ω–æ–≤–∏—Ç—å –≤—Å—ë</button>
    </div>
    <div id="combined-stats" style="padding:6px 16px;font-size:12px;opacity:.6"></div>
    <div id="combined-body" style="overflow-y:auto;flex:1;padding:0 8px 8px"></div>
    <div class="treolan-modal-footer" style="display:flex;align-items:center;gap:10px">
      <span id="combined-freshness" style="font-size:11px;opacity:.5;margin-right:auto"></span>
      <span id="combined-footer-info" style="font-size:12px;opacity:.6"></span>
      <button class="t-refresh-btn" onclick="exportCombined()">üì• Excel</button>
    </div>
  </div>
</div>

<!-- MOBILE FILTER FAB + DRAWER -->
<button id="filter-fab" onclick="openFilterDrawer()" aria-label="–§–∏–ª—å—Ç—Ä—ã">
  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
    <line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/>
  </svg>
  <span>–§–∏–ª—å—Ç—Ä—ã</span>
  <span id="fab-active-count" style="display:none;background:#ef4444;color:#fff;border-radius:10px;padding:1px 6px;font-size:11px;font-weight:700;margin-left:4px"></span>
</button>
<div id="drawer-backdrop" onclick="closeFilterDrawer()" style="display:none"></div>
<div id="filter-drawer">
  <div id="drawer-handle"></div>
  <div style="display:flex;align-items:center;justify-content:space-between;padding:0 20px 16px">
    <span style="font-weight:700;font-size:16px;color:#1E2171">–§–∏–ª—å—Ç—Ä—ã</span>
    <button onclick="closeFilterDrawer()" style="background:none;border:none;font-size:22px;cursor:pointer;color:#888;line-height:1">‚úï</button>
  </div>
  <div id="drawer-filters-content" style="padding:0 20px;overflow-y:auto;flex:1"></div>
  <div style="padding:16px 20px;border-top:1px solid #eee;display:flex;gap:10px">
    <button onclick="resetFilters();closeFilterDrawer()" style="flex:1;padding:12px;border:1.5px solid #DDE0EC;border-radius:10px;background:#fff;color:#1E2171;font-weight:600;font-size:14px;cursor:pointer">–°–±—Ä–æ—Å–∏—Ç—å</button>
    <button onclick="closeFilterDrawer()" style="flex:2;padding:12px;border:none;border-radius:10px;background:#1E2171;color:#fff;font-weight:600;font-size:14px;cursor:pointer">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
  </div>
</div>

<!-- STATS WIDGET -->
<button id="stats-fab" onclick="toggleStatsWidget()" title="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">
  üìä
  <span id="stats-fab-label">–°—Ç–∞—Ç.</span>
</button>
<div id="stats-panel">
  <div id="stats-panel-header">
    <span style="font-weight:700;font-size:14px">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
    <div style="display:flex;gap:8px;align-items:center">
      <button onclick="clearStats()" style="background:none;border:none;font-size:11px;color:#999;cursor:pointer;padding:0">–°–±—Ä–æ—Å–∏—Ç—å</button>
      <button onclick="toggleStatsWidget()" style="background:none;border:none;font-size:18px;color:#888;cursor:pointer;line-height:1">‚úï</button>
    </div>
  </div>
  <div id="stats-tabs" style="display:flex;border-bottom:1px solid #eee;margin-bottom:8px">
    <button class="stats-tab active" onclick="showStatsTab('models')">–ú–æ–¥–µ–ª–∏</button>
    <button class="stats-tab" onclick="showStatsTab('skus')">SKU</button>
    <button class="stats-tab" onclick="showStatsTab('filters')">–§–∏–ª—å—Ç—Ä—ã</button>
    <button class="stats-tab" onclick="showStatsTab('configs')">–ö–æ–Ω—Ñ–∏–≥–∏</button>
  </div>
  <div id="stats-content" style="overflow-y:auto;flex:1;padding:0 4px"></div>
  <div style="padding:8px 4px 0;font-size:10px;color:#bbb;border-top:1px solid #f0f0f0;margin-top:4px">
    –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
  </div>
</div>
</body>
</html>